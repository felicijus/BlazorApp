@page "/weatherforecast"
@using BlazorApp.Shared
@inject HttpClient Http

@using System.Net.Http.Json

<MudThemeProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<PageTitle>Weather forecast</PageTitle>

<h1>Weather forecast</h1>

<p>This component demonstrates fetching data from the server.</p>

@if (forecasts == null)
{
    _loading = true;
    
    <p ><em>Loading...</em></p>
}
else
{
    _loading = false;
<MudTable Items="@forecasts" Hover="true" Breakpoint="Breakpoint.Sm" Loading="_loading" LoadingProgressColor="Color.Info">
    <HeaderContent>
        <MudTh>Id</MudTh>
        <MudTh>Date</MudTh>
        <MudTh>TemperatureC</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Id">@context.Id</MudTd>
        <MudTd DataLabel="Date">@context.Date</MudTd>
        <MudTd DataLabel="TemperatureC">@context.TemperatureC</MudTd>
    </RowTemplate>
</MudTable>
}

<MudSwitch @bind-Checked="_loading">Show Loading</MudSwitch>

@code {

    private IEnumerable<WeatherForecast> forecasts = new List<WeatherForecast>();

    protected override async Task OnInitializedAsync()
    {
        forecasts = await Http.GetFromJsonAsync<List<WeatherForecast>>("api/WeatherForecast");
    }

    private bool _loading;

}
